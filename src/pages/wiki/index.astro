---
/**
 * Wiki 首頁 (wiki/index.astro)
 * 
 * 用途：
 * - 顯示所有 Wiki 設定集/百科條目的列表
 * - 按字母順序排列
 * - 提供條目預覽和連結
 * - 支援多語言
 * 
 * 路由：/wiki
 * 
 * 說明：
 * - 此頁面顯示所有語言的條目
 * - 條目連結會帶上語言代碼（例如 /wiki/zh/entry-id）
 */

import { getCollection } from "astro:content";
import BaseHead from "../../components/BaseHead.astro";
import Footer from "../../components/Footer.astro";
import FormattedDate from "../../components/FormattedDate.astro";
import Header from "../../components/Header.astro";
import { SITE_DESCRIPTION, SITE_TITLE } from "../../consts";
import "./index.css";

/** 
 * 獲取所有 Wiki 條目並按字母順序排列
 * 
 * 說明：
 * - 條目 ID 格式：'zh/entry-id' 或 'ja/entry-id'
 * - 包含所有語言的條目
 */
const posts = (await getCollection("wiki")).sort();
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
  </head>
  <body>
    <Header />
    <main>
      <section>
        <ul>
          {
            posts.map((post) => (
              <li>
                <a href={`/wiki/${post.id}`}>
                  <h4 class="title">{post.data.title}</h4>
                </a>
              </li>
            ))
          }
        </ul>
      </section>
    </main>
    <Footer />
  </body>
</html>
